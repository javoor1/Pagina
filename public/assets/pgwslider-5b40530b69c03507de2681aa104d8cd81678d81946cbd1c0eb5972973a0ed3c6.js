!function(p){p.fn.pgwSlider=function(i){var n={mainClassName:"pgwSlider",listPosition:"right",selectionMode:"click",transitionEffect:"fading",autoSlide:!0,displayList:!0,displayControls:!1,touchControls:!0,verticalCentering:!1,adaptiveHeight:!1,maxHeight:null,beforeSlide:null,afterSlide:null,adaptiveDuration:200,transitionDuration:500,intervalDuration:3e3};if(0==this.length)return this;if(1<this.length)return this.each(function(){p(this).pgwSlider(i)}),this;var u=this;u.plugin=this,u.data=[],u.config={},u.currentSlide=0,u.slideCount=0,u.resizeEvent=null,u.intervalEvent=null,u.touchFirstPosition=null,u.transitionInProgress=!1,u.window=p(window);var t=function(){return u.config=p.extend({},n,i),l(),u.config.autoSlide&&f(),!0},e=function(i){var n={},t=i.find("a").attr("href");if(void 0!==t&&""!=t){n.link=t;var e=i.find("a").attr("target");void 0!==e&&""!=e&&(n.linkTarget=e)}var s=i.find("img").attr("src");void 0!==s&&""!=s&&(n.thumbnail=s);var o=i.find("img").attr("data-large-src");void 0!==o&&""!=o&&(n.image=o);var l=i.find("span").text();if(void 0!==l&&""!=l&&null!=l)n.title=l;else{var r=i.find("img").attr("alt");void 0!==r&&""!=r&&(n.title=r)}var u=i.find("img").attr("data-description");return void 0!==u&&""!=u&&(n.description=u),n},s=function(t,e){return u.config.maxHeight&&(480<u.plugin.width()&&t>u.config.maxHeight?t=u.config.maxHeight:u.plugin.width()<=480&&t+u.plugin.find(".ps-list").height()>u.config.maxHeight&&(t=u.config.maxHeight-u.plugin.find(".ps-list").height())),clearTimeout(u.resizeEvent),u.resizeEvent=setTimeout(function(){var n=(t-6*(u.slideCount-1))/u.slideCount,i=100/u.slideCount;u.plugin.find(".ps-list > li").css({width:i+"%"}),void 0!==e&&e&&null==u.config.maxHeight&&"function"==typeof u.plugin.find(".ps-current").animate?u.plugin.find(".ps-current").animate({height:t},u.config.adaptiveDuration,function(){u.plugin.find(".ps-list > li").animate({height:n},u.config.adaptiveDuration)}):(u.plugin.find(".ps-current").css("height",t),u.plugin.find(".ps-list > li").css("height",n)),u.config.verticalCentering&&(u.plugin.find(".ps-list > li").each(function(){if(50<n&&p(this).find("img").height()>n){var i=Math.round((p(this).find("img").height()-n)/2);p(this).find("img").css("margin-top",-i)}else if(p(this).find("img").height()<n){i=Math.round((n-p(this).find("img").height())/2);p(this).find("img").css("margin-top",i)}else p(this).find("img").css("margin-top","")}),u.plugin.find(".ps-current > ul > li").each(function(){var i="none"!=p(this).css("display");if(i||p(this).show(),p(this).show().find("img").height()>t){var n=Math.round((p(this).find("img").height()-t)/2);p(this).find("img").css("margin-top",-n)}else if(p(this).show().find("img").height()<t){n=Math.round((t-p(this).find("img").height())/2);p(this).find("img").css("margin-top",n)}else p(this).find("img").css("margin-top","");i||p(this).hide()}))},100),!0},o=function(){return u.plugin.width()<=480?u.plugin.addClass("narrow").removeClass("wide"):u.plugin.addClass("wide").removeClass("narrow"),!0},l=function(){if(u.plugin.removeClass(u.config.mainClassName).addClass("ps-list"),u.plugin.wrap('<div class="'+u.config.mainClassName+'"></div>'),u.plugin=u.plugin.parent(),u.plugin.prepend('<div class="ps-current"><ul></ul><span class="ps-caption"></span></div>'),u.slideCount=u.plugin.find(".ps-list > li").length,0==u.slideCount)throw new Error("PgwSlider - No slider item has been found");u.config.displayControls&&1<u.slideCount&&(u.plugin.find(".ps-current").prepend('<span class="ps-prev"><span class="ps-prevIcon"></span></span>'),u.plugin.find(".ps-current").append('<span class="ps-next"><span class="ps-nextIcon"></span></span>'),u.plugin.find(".ps-current .ps-prev").click(function(){u.previousSlide()}),u.plugin.find(".ps-current .ps-next").click(function(){u.nextSlide()})),u.config.displayList||(u.plugin.find(".ps-current").css("width","100%"),u.plugin.find(".ps-list").hide());var t=1;return u.plugin.find(".ps-list > li").each(function(){var n=e(p(this));n.id=t,u.data.push(n),p(this).addClass("elt_"+n.id),n.title&&(1==p(this).find("span").length?""==p(this).find("span").text()&&p(this).find("span").text(n.title):p(this).find("img").after("<span>"+n.title+"</span>"));var i=p('<li class="elt_'+t+'"></li>');n.image?i.html('<img src="'+n.image+'" alt="'+(n.title?n.title:"")+'">'):n.thumbnail&&i.html('<img src="'+n.thumbnail+'" alt="'+(n.title?n.title:"")+'">'),n.link&&i.html('<a href="'+n.link+'"'+(n.linkTarget?' target="'+n.linkTarget+'"':"")+">"+i.html()+"</a>"),u.plugin.find(".ps-current > ul").append(i),"mouseOver"==u.config.selectionMode&&"fading"==u.config.transitionEffect?(p(this).css("cursor","default").click(function(i){i.preventDefault()}).bind("mouseenter",function(){d(n.id)}),p(this).find("a").css("cursor","default")):p(this).css("cursor","pointer").click(function(i){i.preventDefault(),d(n.id)}),t++}),"left"==u.config.listPosition&&u.plugin.addClass("listOnTheLeft"),u.config.autoSlide&&u.plugin.on("mouseenter",function(){clearInterval(u.intervalEvent),u.intervalEvent=null}).on("mouseleave",function(){f()}),d(1),u.plugin.find(".ps-current > ul > li.elt_1 img").on("load",function(){o();var i=u.plugin.find(".ps-current > ul > li.elt_1 img").height();s(i),u.window.resize(function(){o();var i=u.plugin.find(".ps-current > ul > li.elt_"+u.currentSlide+" img").height();s(i,u.config.adaptiveHeight)})}),u.config.touchControls&&1<u.slideCount&&(u.plugin.find(".ps-current").on("touchstart",function(i){try{i.originalEvent.touches[0].clientX&&null==u.touchFirstPosition&&(u.touchFirstPosition=i.originalEvent.touches[0].clientX)}catch(i){u.touchFirstPosition=null}}),u.plugin.find(".ps-current").on("touchmove",function(i){try{i.originalEvent.touches[0].clientX&&null!=u.touchFirstPosition&&(i.originalEvent.touches[0].clientX>u.touchFirstPosition+50?(u.touchFirstPosition=null,u.previousSlide()):i.originalEvent.touches[0].clientX<u.touchFirstPosition-50&&(u.touchFirstPosition=null,u.nextSlide()))}catch(i){u.touchFirstPosition=null}}),u.plugin.find(".ps-current").on("touchend",function(){u.touchFirstPosition=null})),!0},a=function(i){var n="";if(i.title&&(n+="<b>"+i.title+"</b>"),i.description&&(""!=n&&(n+="<br>"),n+=i.description),""!=n&&(i.link&&(n='<a href="'+i.link+'"'+(i.linkTarget?' target="'+i.linkTarget+'"':"")+">"+n+"</a>"),"function"==typeof u.plugin.find(".ps-caption").fadeIn?(u.plugin.find(".ps-caption").html(n),u.plugin.find(".ps-caption").fadeIn(u.config.transitionDuration/2)):(u.plugin.find(".ps-caption").html(n),u.plugin.find(".ps-caption").show())),u.config.displayControls&&("function"==typeof u.plugin.find(".ps-current > .ps-prev").fadeIn?u.plugin.find(".ps-current > .ps-prev, .ps-current > .ps-next").fadeIn(u.config.transitionDuration/2):u.plugin.find(".ps-current > .ps-prev, .ps-current > .ps-next").show()),"function"==typeof u.config.afterSlide&&u.config.afterSlide(i.id),u.config.adaptiveHeight){var t=u.plugin.find(".ps-current .elt_"+i.id+" img").height();s(t,!0)}return!0},r=function(i){var n=u.plugin.find(".ps-current > ul");if(u.plugin.find(".ps-list > li").css("opacity","0.6"),u.plugin.find(".ps-list > li.elt_"+i.id).css("opacity","1"),n.find("li").not(".elt_"+u.currentSlide).not(".elt_"+i.id).each(function(){"function"==typeof p(this).stop&&p(this).stop(),p(this).css("position","").css("z-index",1).hide()}),0<u.currentSlide){var e=n.find(".elt_"+u.currentSlide);"function"!=typeof e.animate&&(e.animate=function(i,n,t){e.css(i),t&&t()}),"function"==typeof e.stop&&e.stop(),e.css("position","absolute").animate({opacity:0},u.config.transitionDuration,function(){e.css("position","").css("z-index",1).hide()})}u.currentSlide=i.id;var s=n.find(".elt_"+i.id);return"function"!=typeof s.animate&&(s.animate=function(i,n,t){s.css(i),t&&t()}),"function"==typeof s.stop&&s.stop(),s.css("position","absolute").show().animate({opacity:1},u.config.transitionDuration,function(){s.css("position","").css("z-index",2).show(),a(i)}),!0},c=function(i,n){var t=u.plugin.find(".ps-current > ul");if(void 0===n&&(n="left"),0==u.currentSlide)t.find(".elt_1").css({position:"",left:"",opacity:1,"z-index":2}).show(),u.plugin.find(".ps-list > li.elt_1").css("opacity","1"),a(i);else{if(u.transitionInProgress)return!1;u.transitionInProgress=!0;var e=t.width();if("left"==n)var s=-e,o=e;else s=e,o=-e;var l=t.find(".elt_"+u.currentSlide);"function"!=typeof l.animate&&(l.animate=function(i,n,t){l.css(i),t&&t()}),l.css("position","absolute").animate({left:s},u.config.transitionDuration,function(){l.css("position","").css("z-index",1).css("left","").css("opacity",0).hide()});var r=t.find(".elt_"+i.id);"function"!=typeof r.animate&&(r.animate=function(i,n,t){r.css(i),t&&t()}),r.css("position","absolute").css("left",o).css("opacity",1).show().animate({left:0},u.config.transitionDuration,function(){r.css("position","").css("left","").css("z-index",2).show(),u.transitionInProgress=!1,u.plugin.find(".ps-list > li").css("opacity","0.6"),u.plugin.find(".ps-list > li.elt_"+i.id).css("opacity","1"),a(i)})}return u.currentSlide=i.id,!0},d=function(i,n,t){if(i==u.currentSlide)return!1;var e=u.data[i-1];if(void 0===e)throw new Error("PgwSlider - The element "+i+" is undefined");return void 0===t&&(t="left"),"function"==typeof u.config.beforeSlide&&u.config.beforeSlide(i),"function"==typeof u.plugin.find(".ps-caption").fadeOut?u.plugin.find(".ps-caption, .ps-prev, .ps-next").fadeOut(u.config.transitionDuration/2):u.plugin.find(".ps-caption, .ps-prev, .ps-next").hide(),"sliding"==u.config.transitionEffect?c(e,t):r(e),void 0!==n&&u.config.autoSlide&&f(),!0},f=function(){return clearInterval(u.intervalEvent),1<u.slideCount&&u.config.autoSlide&&(u.intervalEvent=setInterval(function(){if(u.currentSlide+1<=u.slideCount)var i=u.currentSlide+1;else i=1;d(i)},u.config.intervalDuration)),!0};return u.startSlide=function(){return u.config.autoSlide=!0,f(),!0},u.stopSlide=function(){return u.config.autoSlide=!1,clearInterval(u.intervalEvent),!0},u.getCurrentSlide=function(){return u.currentSlide},u.getSlideCount=function(){return u.slideCount},u.displaySlide=function(i){return d(i,!0),!0},u.nextSlide=function(){if(u.currentSlide+1<=u.slideCount)var i=u.currentSlide+1;else i=1;return d(i,!0,"left"),!0},u.previousSlide=function(){if(1<=u.currentSlide-1)var i=u.currentSlide-1;else i=u.slideCount;return d(i,!0,"right"),!0},u.destroy=function(i){return clearInterval(u.intervalEvent),void 0!==i?(u.plugin.find(".ps-list > li").each(function(){p(this).attr("style",null).removeClass().css("cursor","").unbind("click").unbind("mouseenter"),p(this).find("a").css("cursor",""),p(this).find("img").attr("style",null)}),u.plugin.find(".ps-list").addClass(u.config.mainClassName).removeClass("ps-list"),u.plugin.find(".ps-current").unwrap().remove(),u.hide()):u.parent().remove(),u.plugin=null,u.data=[],u.config={},u.currentSlide=0,u.slideCount=0,u.resizeEvent=null,u.intervalEvent=null,u.touchFirstPosition=null,u.transitionInProgress=!1,!(u.window=null)},u.reload=function(i){return u.destroy(!0),(u=this).plugin=this,u.window=p(window),u.plugin.show(),u.config=p.extend({},n,i),l(),u.config.autoSlide&&f(),!0},t(),this}}(window.Zepto||window.jQuery);